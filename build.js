(()=>{"use strict";let e={randomNumber:0,rangeMin:0,rangeMax:0,counter:-1,getRangeMin:function(){return this.rangeMin},getRangeMax:function(){return this.rangeMax},getCounter:function(){return this.counter++,this.counter},resetStateStore:function(){this.randomNumber=0,this.rangeMin=0,this.rangeMax=0,this.counter=-1},writeRandomNumber:function(e,t){return this.rangeMin=Number(e),this.rangeMax=Number(t),this.randomNumber=Math.floor(Math.random()*(this.rangeMax-this.rangeMin+1)+this.rangeMin),console.log(this.randomNumber),this.randomNumber},getOutOfRange:function(e){return this.rangeMin>e||e>this.rangeMax},checkWinGame:function(e){return this.randomNumber==e},checkMoreOrLess:function(e){return e<this.randomNumber?this.counter%3==0?`Загаданное число больше и ${t()}`:"Загаданное число больше":this.counter%3==0?`Загаданное число меньше и ${t()}`:"Загаданное число меньше"},getRandomNumber:function(){return this.randomNumber}};const t=()=>e.randomNumber%2==0?"четное":"нечетное",n=-1e4,r=document.getElementById("playerContainer"),u=()=>{document.getElementById("selectRange").checked?i():(e.writeRandomNumber(1,100),m())},i=()=>{r.innerHTML="",r.insertAdjacentHTML("beforeend",'\n        <h3>Введите диапазон чисел</h3>\n        <span class="system_range">Минимальное: -10000, Максимальное: 10000</span>\n        <div class = "input_range">\n            [\n            <input type="number" step= "1" class="input_number-max" id="inputMinNumber" placeholder="-10000">\n            <button class="input_switch-button" id="inputSwitchButton">↔</button>\n            <input type="number" step= "1" class="input_number-min" id="inputMaxNumber" placeholder="10000">\n            ]\n            <span class="input_min-error"></span>\n            <span class="input_max-error"></span>\n        </div>\n        <button class="input_range-confirm" id="inputMaxConfirm">Ввести число</button>\n        <button class="reset_game-button" id="restartGameButton">Начать заново</button>\n    ');let e=r.querySelector("#inputMinNumber"),t=r.querySelector("#inputMaxNumber"),n=r.querySelector("#inputMaxConfirm"),u=r.querySelector("#inputSwitchButton"),i=r.querySelector("#restartGameButton");t.addEventListener("input",s),e.addEventListener("input",o),n.addEventListener("click",l),u.addEventListener("click",a),i.addEventListener("click",p)},a=()=>{let e=inputMaxNumber.value,t=inputMinNumber.value,n=r.querySelector(".input_max-error"),u=r.querySelector(".input_min-error");inputMinNumber.value=e,inputMaxNumber.value=t,Number(e)<=Number(t)&&(inputMinNumber.classList.remove("error"),inputMaxNumber.classList.remove("error"),u.textContent="",n.textContent="")},o=e=>{let t=e.target,u=r.querySelector(".input_min-error");if(/[,.]/g.test(t.value)){let e=t.value.replace(/[,.]/g,"");t.value=e}let i=Number(t.value),a=Number(inputMaxNumber.value);if(n<=i&&i<=a)return inputMinNumber.classList.remove("error"),void(u.textContent="")},s=e=>{let t=e.target,n=r.querySelector(".input_max-error");if(/[,.]/g.test(t.value)){let e=t.value.replace(/[,.]/g,"");t.value=e}let u=Number(inputMinNumber.value),i=Number(t.value);if(i<=1e4&&u<=i)return inputMaxNumber.classList.remove("error"),void(n.textContent="")},l=t=>{let u=inputMaxNumber.value,i=inputMinNumber.value,a=r.querySelector(".input_max-error"),o=r.querySelector(".input_min-error");return""===i||Number(i)<n?(inputMinNumber.classList.add("error"),void(o.textContent=""==i?"Введите предел":"Число меньше предела")):""===u||Number(u)>1e4?(inputMaxNumber.classList.add("error"),void(a.textContent=""===u?"Введите предел":"Число больше предела")):Number(i)>Number(u)?(inputMaxNumber.classList.add("error"),inputMinNumber.classList.add("error"),a.textContent="Проверьте диапазон",void(o.textContent="Проверьте диапазон")):(e.writeRandomNumber(i,u),void m())},m=()=>{r.innerHTML="";let t=`\n        <h4>Число загадано в диапазоне: [${e.getRangeMin()}, ${e.getRangeMax()}]</h4>\n        <div class = "input_number-container">\n            <span class="hint"></span>\n            <input type="text" step= "1" class="input_number" id="inputNumber" placeholder="Введите число">\n            <span class="input_number-error"></span>\n        </div>\n        <div class="input_count-txt">Количество попыток: <span class="input_count" id="inputCount">${e.getCounter()}</span></div>\n        <button class="input_number-confirm" id="inputNumberConfirm">Отгадать число</button>\n        <button class="reset_game-button" id="restartGameButton">Начать заново</button>\n    `;r.insertAdjacentHTML("beforeend",t);let n=r.querySelector("#inputNumber"),u=r.querySelector("#inputNumberConfirm"),i=r.querySelector("#restartGameButton");n.addEventListener("input",function(e,t){let n=null;return function(...t){n||(n=setTimeout((()=>{e(...t),clearTimeout(n),n=null}),0))}}(c)),i.addEventListener("click",p),u.addEventListener("click",b)},c=e=>{let t=e.target,n=t.value,u=r.querySelector(".input_number-error");n=n.match(/^-?\d*/),""!=n&&"-"!=n?(""!==n&&(t.classList.remove("error"),u.textContent=""),t.value=n):t.value=n},b=()=>{let t=Number(inputNumber.value),n=r.querySelector("#inputCount"),u=r.querySelector(".input_number-error"),i=r.querySelector(".hint");if(""==inputNumber.value||"-"==inputNumber.value)return inputNumber.classList.add("error"),void(u.textContent="Укажите число");let a=e.getCounter();e.getOutOfRange(t)&&(inputNumber.classList.add("error"),u.textContent="Выход за предел диапазона"),e.checkWinGame(t)?d():(i.textContent=e.checkMoreOrLess(t),n.innerHTML=a,inputNumber.value="")},d=()=>{r.innerHTML="";let t=`\n        <marquee behavior="alternate">\n            <h1>Победа!!!<h1>\n            \n        </marquee>\n        <marquee direction="right" behavior="alternate">\n            <h1>Число: ${e.getRandomNumber()}<h1>\n        </marquee>\n        <marquee behavior="alternate">\n            <h1>Попыток: ${e.getCounter()-1}<h1>\n        </marquee>\n        <button class="reset_game-button" id="restartGameButton">Начать заново</button>\n    `;r.innerHTML=t,r.querySelector("#restartGameButton").addEventListener("click",p)},p=()=>{e.resetStateStore(),r.innerHTML='\n    <div class="select_range-container">\n        <label for="selectRange"><h5>Выбрать свой диапазон?</h5></label>\n        <input type="checkbox" id="selectRange">\n    </div>\n    <button class="start-button" id="startButton">\n        Начать игру\n    </button>\n    ',r.querySelector("#startButton").addEventListener("click",u)};document.getElementById("startButton").addEventListener("click",u)})();