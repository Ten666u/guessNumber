(()=>{"use strict";let e={randomNumber:0,rangeMin:0,rangeMax:0,counter:-1};function t(t,n){return e.rangeMin=Number(t),e.rangeMax=Number(n),e.randomNumber=Math.floor(Math.random()*(e.rangeMax-e.rangeMin+1)+e.rangeMin),console.log(e.randomNumber),e.randomNumber}function n(){return e.counter++,e.counter}const r=()=>e.randomNumber%2==0?"четное":"нечетное",u=-1e4,a=document.getElementById("playerContainer"),i=()=>{document.getElementById("selectRange").checked?o():(t(1,100),b())},o=()=>{a.innerHTML="",a.insertAdjacentHTML("beforeend",'\n        <h3>Введите диапазон чисел</h3>\n        <span class="system_range">Минимальное: -10000, Максимальное: 10000</span>\n        <div class = "input_range">\n            [\n            <input type="number" step= "1" class="input_number-max" id="inputMinNumber" placeholder="-10000">\n            <button class="input_switch-button" id="inputSwitchButton">↔</button>\n            <input type="number" step= "1" class="input_number-min" id="inputMaxNumber" placeholder="10000">\n            ]\n            <span class="input_min-error"></span>\n            <span class="input_max-error"></span>\n        </div>\n        <button class="input_range-confirm" id="inputMaxConfirm">Ввести число</button>\n        <button class="reset_game-button" id="restartGameButton">Начать заново</button>\n    ');let e=a.querySelector("#inputMinNumber"),t=a.querySelector("#inputMaxNumber"),n=a.querySelector("#inputMaxConfirm"),r=a.querySelector("#inputSwitchButton"),u=a.querySelector("#restartGameButton");t.addEventListener("input",m),e.addEventListener("input",s),n.addEventListener("click",c),r.addEventListener("click",l),u.addEventListener("click",N)},l=()=>{let e=inputMaxNumber.value,t=inputMinNumber.value,n=a.querySelector(".input_max-error"),r=a.querySelector(".input_min-error");inputMinNumber.value=e,inputMaxNumber.value=t,Number(e)<=Number(t)&&(inputMinNumber.classList.remove("error"),inputMaxNumber.classList.remove("error"),r.textContent="",n.textContent="")},s=e=>{let t=e.target,n=a.querySelector(".input_min-error");if(/[,.]/g.test(t.value)){let e=t.value.replace(/[,.]/g,"");t.value=e}let r=Number(t.value),i=Number(inputMaxNumber.value);if(u<=r&&r<=i)return inputMinNumber.classList.remove("error"),void(n.textContent="")},m=e=>{let t=e.target,n=a.querySelector(".input_max-error");if(/[,.]/g.test(t.value)){let e=t.value.replace(/[,.]/g,"");t.value=e}let r=Number(inputMinNumber.value),u=Number(t.value);if(u<=1e4&&r<=u)return inputMaxNumber.classList.remove("error"),void(n.textContent="")},c=e=>{let n=inputMaxNumber.value,r=inputMinNumber.value,i=a.querySelector(".input_max-error"),o=a.querySelector(".input_min-error");return""===r||Number(r)<u?(inputMinNumber.classList.add("error"),void(o.textContent=""==r?"Введите предел":"Число меньше предела")):""===n||Number(n)>1e4?(inputMaxNumber.classList.add("error"),void(i.textContent=""===n?"Введите предел":"Число больше предела")):Number(r)>Number(n)?(inputMaxNumber.classList.add("error"),inputMinNumber.classList.add("error"),i.textContent="Проверьте диапазон",void(o.textContent="Проверьте диапазон")):(t(r,n),void b())},b=()=>{a.innerHTML="";let t=`\n        <h4>Число загадано в диапазоне: [${e.rangeMin}, ${e.rangeMax}]</h4>\n        <div class = "input_number-container">\n            <span class="hint"></span>\n            <input type="text" step= "1" class="input_number" id="inputNumber" placeholder="Введите число">\n            <span class="input_number-error"></span>\n        </div>\n        <div class="input_count-txt">Количество попыток: <span class="input_count" id="inputCount">${n()}</span></div>\n        <button class="input_number-confirm" id="inputNumberConfirm">Отгадать число</button>\n        <button class="reset_game-button" id="restartGameButton">Начать заново</button>\n    `;a.insertAdjacentHTML("beforeend",t);let r=a.querySelector("#inputNumber"),u=a.querySelector("#inputNumberConfirm"),i=a.querySelector("#restartGameButton");r.addEventListener("input",function(e,t){let n=null;return function(...t){n||(n=setTimeout((()=>{e(...t),clearTimeout(n),n=null}),0))}}(p)),i.addEventListener("click",N),u.addEventListener("click",d)},p=e=>{let t=e.target,n=t.value,r=a.querySelector(".input_number-error");n=n.match(/^-?\d*/),""!=n&&"-"!=n?(""!==n&&(t.classList.remove("error"),r.textContent=""),t.value=n):t.value=n},d=()=>{let t=Number(inputNumber.value),u=a.querySelector("#inputCount"),i=a.querySelector(".input_number-error"),o=a.querySelector(".hint");if(""==inputNumber.value||"-"==inputNumber.value)return inputNumber.classList.add("error"),void(i.textContent="Укажите число");let l=n();(function(t){return e.rangeMin>t||t>e.rangeMax})(t)&&(inputNumber.classList.add("error"),i.textContent="Выход за предел диапазона"),function(t){return e.randomNumber==t}(t)?v():(o.textContent=function(t){return t<e.randomNumber?e.counter%3==0?`Загаданное число больше и ${r()}`:"Загаданное число больше":e.counter%3==0?`Загаданное число меньше и ${r()}`:"Загаданное число меньше"}(t),u.innerHTML=l,inputNumber.value="")},v=()=>{a.innerHTML="";let t=`\n        <marquee behavior="alternate">\n            <h1>Победа!!!<h1>\n            \n        </marquee>\n        <marquee direction="right" behavior="alternate">\n            <h1>Число: ${e.randomNumber}<h1>\n        </marquee>\n        <marquee behavior="alternate">\n            <h1>Попыток: ${n()-1}<h1>\n        </marquee>\n        <button class="reset_game-button" id="restartGameButton">Начать заново</button>\n    `;a.innerHTML=t,a.querySelector("#restartGameButton").addEventListener("click",N)},N=()=>{e={randomNumber:0,rangeMin:0,rangeMax:0,counter:-1},a.innerHTML='\n    <div class="select_range-container">\n        <label for="selectRange"><h5>Выбрать свой диапазон?</h5></label>\n        <input type="checkbox" id="selectRange">\n    </div>\n    <button class="start-button" id="startButton">\n        Начать игру\n    </button>\n    ',a.querySelector("#startButton").addEventListener("click",i)};document.getElementById("startButton").addEventListener("click",i)})();